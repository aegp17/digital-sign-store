{"version":3,"file":"StatusView-BcMAyh1O.js","sources":["../../src/views/StatusView.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"min-h-screen bg-gray-50 py-8\">\n      <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"text-center mb-8\">\n          <h1 class=\"text-3xl font-bold text-gray-900 mb-4\">Consultar Estado de Solicitud</h1>\n          <p class=\"text-lg text-gray-600\">\n            Ingresa tu código de referencia para consultar el estado de tu solicitud\n          </p>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-md p-8\">\n          <form @submit.prevent=\"handleSubmit\" class=\"space-y-6\">\n            <div>\n              <label class=\"form-label\">Código de Referencia *</label>\n              <input\n                v-model=\"referenceCode\"\n                type=\"text\"\n                class=\"form-input\"\n                :class=\"{ 'border-red-500': error }\"\n                placeholder=\"Ej: REF1234567890ABC\"\n                required\n              />\n              <p v-if=\"error\" class=\"form-error\">\n                {{ error }}\n              </p>\n            </div>\n\n            <button\n              type=\"submit\"\n              :disabled=\"!referenceCode || isLoading\"\n              class=\"w-full btn btn-primary py-3\"\n            >\n              <span v-if=\"isLoading\" class=\"flex items-center justify-center\">\n                <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                  <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Consultando...\n              </span>\n              <span v-else>Consultar Estado</span>\n            </button>\n          </form>\n        </div>\n\n        <!-- Recent Requests -->\n        <div v-if=\"recentRequests.length > 0\" class=\"mt-8\">\n          <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Solicitudes Recientes</h2>\n          <div class=\"space-y-4\">\n            <div\n              v-for=\"request in recentRequests\"\n              :key=\"request.id\"\n              class=\"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow\"\n              @click=\"goToRequestStatus(request.referenceTransaction)\"\n            >\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <h3 class=\"text-lg font-medium text-gray-900\">\n                    {{ request.referenceTransaction }}\n                  </h3>\n                  <p class=\"text-sm text-gray-600\">\n                    Creado el {{ formatDate(request.createdAt) }}\n                  </p>\n                </div>\n                <div class=\"flex items-center space-x-2\">\n                  <span :class=\"getStatusBadgeClasses(request.status)\" class=\"badge\">\n                    {{ getStatusLabel(request.status) }}\n                  </span>\n                  <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport AppLayout from '@/components/Layout/AppLayout.vue'\nimport { useSignatureRequestStore } from '@/stores/signatureRequest'\nimport type { SignatureRequest } from '@/types'\nimport { SignatureRequestStatus } from '@/types'\n\nconst router = useRouter()\nconst signatureRequestStore = useSignatureRequestStore()\n\nconst referenceCode = ref('')\nconst isLoading = ref(false)\nconst error = ref('')\nconst recentRequests = ref<SignatureRequest[]>([])\n\nconst handleSubmit = async () => {\n  if (!referenceCode.value) return\n  \n  isLoading.value = true\n  error.value = ''\n  \n  try {\n    await signatureRequestStore.fetchRequestStatus(referenceCode.value)\n    router.push(`/status/${referenceCode.value}`)\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : 'Error al consultar el estado'\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst goToRequestStatus = (reference: string) => {\n  router.push(`/status/${reference}`)\n}\n\nconst getStatusLabel = (status: SignatureRequestStatus): string => {\n  const labels = {\n    REGISTERED: 'Registrado',\n    VALIDATING: 'Validando',\n    REFUSED: 'Rechazado',\n    ERROR: 'Error',\n    APPROVED: 'Aprobado',\n    GENERATED: 'Generado',\n    EXPIRED: 'Expirado',\n  }\n  return labels[status] || status\n}\n\nconst getStatusBadgeClasses = (status: SignatureRequestStatus): string => {\n  const classes = {\n    REGISTERED: 'badge-info',\n    VALIDATING: 'badge-warning',\n    REFUSED: 'badge-error',\n    ERROR: 'badge-error',\n    APPROVED: 'badge-success',\n    GENERATED: 'badge-success',\n    EXPIRED: 'badge-warning',\n  }\n  return classes[status] || 'badge-info'\n}\n\nconst formatDate = (date: Date | string): string => {\n  const d = new Date(date)\n  return d.toLocaleDateString('es-EC', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  })\n}\n\nonMounted(() => {\n  // Load recent requests from store\n  recentRequests.value = signatureRequestStore.requests.slice(0, 5)\n})\n</script>\n"],"names":["router","useRouter","signatureRequestStore","useSignatureRequestStore","referenceCode","ref","isLoading","error","recentRequests","handleSubmit","err","goToRequestStatus","reference","getStatusLabel","status","getStatusBadgeClasses","formatDate","date","onMounted","_createBlock","AppLayout","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_cache","$event","_normalizeClass","_createElementBlock","_hoisted_4","_toDisplayString","_openBlock","_hoisted_6","_hoisted_8","_hoisted_9","_Fragment","_renderList","request","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14"],"mappings":"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"}
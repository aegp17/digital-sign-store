import{d as L,f as c,A as k,s as D,c as N,w as v,o,a as t,h as l,i as f,b as x,t as r,n as y,F as S,y as I,e as E,r as V}from"./index-DumrJyPT.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-vCK_QW0o.js";import{u as M}from"./signatureRequest-BiqaCAW-.js";const T={class:"min-h-screen bg-gray-50 py-8"},G={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},O={class:"text-center mb-8"},B={class:"text-lg text-gray-600"},P={class:"font-mono font-semibold"},F={key:0,class:"bg-white rounded-lg shadow-md p-8 text-center"},q={key:1,class:"bg-white rounded-lg shadow-md p-8"},U={class:"text-center"},H={class:"mt-2 text-gray-600"},j={key:2,class:"space-y-6"},W={class:"bg-white rounded-lg shadow-md p-6"},X={class:"flex items-center justify-between mb-4"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"font-medium"},J={class:"font-medium"},K={class:"font-medium"},Q={class:"font-medium"},Z={key:0,class:"bg-white rounded-lg shadow-md p-6"},tt={class:"space-y-3"},et={class:"flex-shrink-0"},st={key:0,class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},at={key:1,class:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},ot={key:2,class:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20"},lt={class:"flex-1"},rt={class:"text-sm font-medium"},nt={class:"text-xs text-gray-500 mt-1"},dt={class:"bg-white rounded-lg shadow-md p-6"},it={class:"flex flex-col sm:flex-row gap-4"},ct=["disabled"],xt=L({__name:"StatusDetailView",setup(ut){const _=k(),h=M(),u=c(_.params.reference),d=c(!1),i=c(""),a=c(null),m=async()=>{if(u.value){d.value=!0,i.value="";try{a.value=await h.fetchRequestStatus(u.value)}catch(s){i.value=s instanceof Error?s.message:"Error al consultar el estado"}finally{d.value=!1}}},p=s=>({REGISTERED:"Registrado",VALIDATING:"Validando",REFUSED:"Rechazado",ERROR:"Error",APPROVED:"Aprobado",GENERATED:"Generado",EXPIRED:"Expirado"})[s]||s,w=s=>({PENDING:"Pendiente",MANUALLY_VALIDATING:"Validación Manual",AUTOMATICALLY_VALIDATING:"Validación Automática",ERROR:"Error",REFUSED:"Rechazado",COMPLETED:"Completado"})[s]||s,R=s=>({REGISTERED:"badge-info",VALIDATING:"badge-warning",REFUSED:"badge-error",ERROR:"badge-error",APPROVED:"badge-success",GENERATED:"badge-success",EXPIRED:"badge-warning"})[s]||"badge-info",A=s=>({INFO:"bg-blue-50 border border-blue-200",WARNING:"bg-yellow-50 border border-yellow-200",ALERT:"bg-red-50 border border-red-200"})[s]||"bg-gray-50 border border-gray-200",g=s=>new Date(s).toLocaleDateString("es-EC",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return D(()=>{m()}),(s,e)=>{const b=V("RouterLink");return o(),N(z,null,{default:v(()=>[t("div",T,[t("div",G,[t("div",O,[e[1]||(e[1]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Estado de Solicitud",-1)),t("p",B,[e[0]||(e[0]=x(" Código de referencia: ",-1)),t("span",P,r(u.value),1)])]),d.value?(o(),l("div",F,[...e[2]||(e[2]=[t("svg",{class:"animate-spin mx-auto h-12 w-12 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("p",{class:"mt-4 text-gray-600"},"Cargando información de la solicitud...",-1)])])):i.value?(o(),l("div",q,[t("div",U,[e[3]||(e[3]=t("svg",{class:"mx-auto h-12 w-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e[4]||(e[4]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Error al cargar la solicitud",-1)),t("p",H,r(i.value),1),t("div",{class:"mt-6"},[t("button",{onClick:m,class:"btn btn-primary"}," Reintentar ")])])])):a.value?(o(),l("div",j,[t("div",W,[t("div",X,[e[5]||(e[5]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Estado Actual",-1)),t("span",{class:y([R(a.value.status),"badge text-sm"])},r(p(a.value.status)),3)]),t("div",Y,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"Estado de Solicitud",-1)),t("p",$,r(p(a.value.status)),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600"},"Estado de Validación",-1)),t("p",J,r(w(a.value.validationStatus)),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600"},"Fecha de Creación",-1)),t("p",K,r(g(a.value.createdAt)),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600"},"Última Actualización",-1)),t("p",Q,r(g(a.value.updatedAt)),1)])])]),a.value.observations&&a.value.observations.length>0?(o(),l("div",Z,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Observaciones",-1)),t("div",tt,[(o(!0),l(S,null,I(a.value.observations,(n,C)=>(o(),l("div",{key:C,class:y(["flex items-start space-x-3 p-3 rounded-lg",A(n.type)])},[t("div",et,[n.type==="INFO"?(o(),l("svg",st,[...e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])])):n.type==="WARNING"?(o(),l("svg",at,[...e[11]||(e[11]=[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):(o(),l("svg",ot,[...e[12]||(e[12]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])]))]),t("div",lt,[t("p",rt,r(n.message),1),t("p",nt,r(g(n.createdAt)),1)])],2))),128))])])):f("",!0),t("div",dt,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Acciones",-1)),t("div",it,[t("button",{onClick:m,disabled:d.value,class:"btn btn-secondary"}," Actualizar Estado ",8,ct),E(b,{to:"/request",class:"btn btn-primary text-center"},{default:v(()=>[...e[14]||(e[14]=[x(" Nueva Solicitud ",-1)])]),_:1}),E(b,{to:"/status",class:"btn btn-secondary text-center"},{default:v(()=>[...e[15]||(e[15]=[x(" Consultar Otra ",-1)])]),_:1})])])])):f("",!0)])])]),_:1})}}});export{xt as default};
//# sourceMappingURL=StatusDetailView-CRaF54VY.js.map

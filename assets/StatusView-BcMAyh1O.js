import{d as y,f as d,s as w,c as R,w as _,o,a as e,h as n,i as p,j as C,l as S,p as D,n as f,t as c,b as k,F as A,y as T,u as V}from"./index-DumrJyPT.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-vCK_QW0o.js";import{u as B}from"./signatureRequest-BiqaCAW-.js";const G={class:"min-h-screen bg-gray-50 py-8"},N={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},L={class:"bg-white rounded-lg shadow-md p-8"},P={key:0,class:"form-error"},j=["disabled"],F={key:0,class:"flex items-center justify-center"},M={key:1},z={key:0,class:"mt-8"},O={class:"space-y-4"},$=["onClick"],U={class:"flex justify-between items-start"},q={class:"text-lg font-medium text-gray-900"},X={class:"text-sm text-gray-600"},H={class:"flex items-center space-x-2"},Z=y({__name:"StatusView",setup(J){const m=V(),g=B(),r=d(""),i=d(!1),l=d(""),u=d([]),v=async()=>{if(r.value){i.value=!0,l.value="";try{await g.fetchRequestStatus(r.value),m.push(`/status/${r.value}`)}catch(s){l.value=s instanceof Error?s.message:"Error al consultar el estado"}finally{i.value=!1}}},h=s=>{m.push(`/status/${s}`)},x=s=>({REGISTERED:"Registrado",VALIDATING:"Validando",REFUSED:"Rechazado",ERROR:"Error",APPROVED:"Aprobado",GENERATED:"Generado",EXPIRED:"Expirado"})[s]||s,b=s=>({REGISTERED:"badge-info",VALIDATING:"badge-warning",REFUSED:"badge-error",ERROR:"badge-error",APPROVED:"badge-success",GENERATED:"badge-success",EXPIRED:"badge-warning"})[s]||"badge-info",E=s=>new Date(s).toLocaleDateString("es-EC",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return w(()=>{u.value=g.requests.slice(0,5)}),(s,t)=>(o(),R(I,null,{default:_(()=>[e("div",G,[e("div",N,[t[5]||(t[5]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Consultar Estado de Solicitud"),e("p",{class:"text-lg text-gray-600"}," Ingresa tu código de referencia para consultar el estado de tu solicitud ")],-1)),e("div",L,[e("form",{onSubmit:C(v,["prevent"]),class:"space-y-6"},[e("div",null,[t[1]||(t[1]=e("label",{class:"form-label"},"Código de Referencia *",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),type:"text",class:f(["form-input",{"border-red-500":l.value}]),placeholder:"Ej: REF1234567890ABC",required:""},null,2),[[D,r.value]]),l.value?(o(),n("p",P,c(l.value),1)):p("",!0)]),e("button",{type:"submit",disabled:!r.value||i.value,class:"w-full btn btn-primary py-3"},[i.value?(o(),n("span",F,[...t[2]||(t[2]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" Consultando... ",-1)])])):(o(),n("span",M,"Consultar Estado"))],8,j)],32)]),u.value.length>0?(o(),n("div",z,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Solicitudes Recientes",-1)),e("div",O,[(o(!0),n(A,null,T(u.value,a=>(o(),n("div",{key:a.id,class:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:K=>h(a.referenceTransaction)},[e("div",U,[e("div",null,[e("h3",q,c(a.referenceTransaction),1),e("p",X," Creado el "+c(E(a.createdAt)),1)]),e("div",H,[e("span",{class:f([b(a.status),"badge"])},c(x(a.status)),3),t[3]||(t[3]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])],8,$))),128))])])):p("",!0)])])]),_:1}))}});export{Z as default};
//# sourceMappingURL=StatusView-BcMAyh1O.js.map

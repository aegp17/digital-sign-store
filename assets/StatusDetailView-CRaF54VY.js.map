{"version":3,"file":"StatusDetailView-CRaF54VY.js","sources":["../../src/views/StatusDetailView.vue"],"sourcesContent":["<template>\n  <AppLayout>\n    <div class=\"min-h-screen bg-gray-50 py-8\">\n      <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <!-- Header -->\n        <div class=\"text-center mb-8\">\n          <h1 class=\"text-3xl font-bold text-gray-900 mb-4\">Estado de Solicitud</h1>\n          <p class=\"text-lg text-gray-600\">\n            Código de referencia: <span class=\"font-mono font-semibold\">{{ reference }}</span>\n          </p>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"isLoading\" class=\"bg-white rounded-lg shadow-md p-8 text-center\">\n          <svg class=\"animate-spin mx-auto h-12 w-12 text-blue-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <p class=\"mt-4 text-gray-600\">Cargando información de la solicitud...</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-else-if=\"error\" class=\"bg-white rounded-lg shadow-md p-8\">\n          <div class=\"text-center\">\n            <svg class=\"mx-auto h-12 w-12 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n            </svg>\n            <h3 class=\"mt-4 text-lg font-medium text-gray-900\">Error al cargar la solicitud</h3>\n            <p class=\"mt-2 text-gray-600\">{{ error }}</p>\n            <div class=\"mt-6\">\n              <button\n                @click=\"fetchStatus\"\n                class=\"btn btn-primary\"\n              >\n                Reintentar\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Request Details -->\n        <div v-else-if=\"request\" class=\"space-y-6\">\n          <!-- Status Card -->\n          <div class=\"bg-white rounded-lg shadow-md p-6\">\n            <div class=\"flex items-center justify-between mb-4\">\n              <h2 class=\"text-xl font-semibold text-gray-900\">Estado Actual</h2>\n              <span :class=\"getStatusBadgeClasses(request.status)\" class=\"badge text-sm\">\n                {{ getStatusLabel(request.status) }}\n              </span>\n            </div>\n            \n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <p class=\"text-sm text-gray-600\">Estado de Solicitud</p>\n                <p class=\"font-medium\">{{ getStatusLabel(request.status) }}</p>\n              </div>\n              <div>\n                <p class=\"text-sm text-gray-600\">Estado de Validación</p>\n                <p class=\"font-medium\">{{ getValidationStatusLabel(request.validationStatus) }}</p>\n              </div>\n              <div>\n                <p class=\"text-sm text-gray-600\">Fecha de Creación</p>\n                <p class=\"font-medium\">{{ formatDate(request.createdAt) }}</p>\n              </div>\n              <div>\n                <p class=\"text-sm text-gray-600\">Última Actualización</p>\n                <p class=\"font-medium\">{{ formatDate(request.updatedAt) }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Observations -->\n          <div v-if=\"request.observations && request.observations.length > 0\" class=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Observaciones</h3>\n            <div class=\"space-y-3\">\n              <div\n                v-for=\"(observation, index) in request.observations\"\n                :key=\"index\"\n                class=\"flex items-start space-x-3 p-3 rounded-lg\"\n                :class=\"getObservationClasses(observation.type)\"\n              >\n                <div class=\"flex-shrink-0\">\n                  <svg\n                    v-if=\"observation.type === 'INFO'\"\n                    class=\"w-5 h-5 text-blue-600\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\" />\n                  </svg>\n                  <svg\n                    v-else-if=\"observation.type === 'WARNING'\"\n                    class=\"w-5 h-5 text-yellow-600\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\n                  </svg>\n                  <svg\n                    v-else\n                    class=\"w-5 h-5 text-red-600\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium\">{{ observation.message }}</p>\n                  <p class=\"text-xs text-gray-500 mt-1\">\n                    {{ formatDate(observation.createdAt) }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Actions -->\n          <div class=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Acciones</h3>\n            <div class=\"flex flex-col sm:flex-row gap-4\">\n              <button\n                @click=\"fetchStatus\"\n                :disabled=\"isLoading\"\n                class=\"btn btn-secondary\"\n              >\n                Actualizar Estado\n              </button>\n              <RouterLink\n                to=\"/request\"\n                class=\"btn btn-primary text-center\"\n              >\n                Nueva Solicitud\n              </RouterLink>\n              <RouterLink\n                to=\"/status\"\n                class=\"btn btn-secondary text-center\"\n              >\n                Consultar Otra\n              </RouterLink>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport AppLayout from '@/components/Layout/AppLayout.vue'\nimport { useSignatureRequestStore } from '@/stores/signatureRequest'\nimport type { SignatureRequest } from '@/types'\nimport { SignatureRequestStatus, ValidationStatus, ObservationType } from '@/types'\n\nconst route = useRoute()\nconst signatureRequestStore = useSignatureRequestStore()\n\nconst reference = ref(route.params.reference as string)\nconst isLoading = ref(false)\nconst error = ref('')\nconst request = ref<SignatureRequest | null>(null)\n\nconst fetchStatus = async () => {\n  if (!reference.value) return\n  \n  isLoading.value = true\n  error.value = ''\n  \n  try {\n    request.value = await signatureRequestStore.fetchRequestStatus(reference.value)\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : 'Error al consultar el estado'\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst getStatusLabel = (status: SignatureRequestStatus): string => {\n  const labels = {\n    REGISTERED: 'Registrado',\n    VALIDATING: 'Validando',\n    REFUSED: 'Rechazado',\n    ERROR: 'Error',\n    APPROVED: 'Aprobado',\n    GENERATED: 'Generado',\n    EXPIRED: 'Expirado',\n  }\n  return labels[status] || status\n}\n\nconst getValidationStatusLabel = (status: ValidationStatus): string => {\n  const labels = {\n    PENDING: 'Pendiente',\n    MANUALLY_VALIDATING: 'Validación Manual',\n    AUTOMATICALLY_VALIDATING: 'Validación Automática',\n    ERROR: 'Error',\n    REFUSED: 'Rechazado',\n    COMPLETED: 'Completado',\n  }\n  return labels[status] || status\n}\n\nconst getStatusBadgeClasses = (status: SignatureRequestStatus): string => {\n  const classes = {\n    REGISTERED: 'badge-info',\n    VALIDATING: 'badge-warning',\n    REFUSED: 'badge-error',\n    ERROR: 'badge-error',\n    APPROVED: 'badge-success',\n    GENERATED: 'badge-success',\n    EXPIRED: 'badge-warning',\n  }\n  return classes[status] || 'badge-info'\n}\n\nconst getObservationClasses = (type: ObservationType): string => {\n  const classes = {\n    INFO: 'bg-blue-50 border border-blue-200',\n    WARNING: 'bg-yellow-50 border border-yellow-200',\n    ALERT: 'bg-red-50 border border-red-200',\n  }\n  return classes[type] || 'bg-gray-50 border border-gray-200'\n}\n\nconst formatDate = (date: Date | string): string => {\n  const d = new Date(date)\n  return d.toLocaleDateString('es-EC', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  })\n}\n\nonMounted(() => {\n  fetchStatus()\n})\n</script>\n"],"names":["route","useRoute","signatureRequestStore","useSignatureRequestStore","reference","ref","isLoading","error","request","fetchStatus","err","getStatusLabel","status","getValidationStatusLabel","getStatusBadgeClasses","getObservationClasses","type","formatDate","date","onMounted","_createBlock","AppLayout","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_cache","_hoisted_4","_hoisted_5","_toDisplayString","_openBlock","_createElementBlock","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_Fragment","observation","index","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_createVNode","_component_RouterLink"],"mappings":"k+CA4JA,MAAMA,EAAQC,EAAA,EACRC,EAAwBC,EAAA,EAExBC,EAAYC,EAAIL,EAAM,OAAO,SAAmB,EAChDM,EAAYD,EAAI,EAAK,EACrBE,EAAQF,EAAI,EAAE,EACdG,EAAUH,EAA6B,IAAI,EAE3CI,EAAc,SAAY,CAC9B,GAAKL,EAAU,MAEf,CAAAE,EAAU,MAAQ,GAClBC,EAAM,MAAQ,GAEd,GAAI,CACFC,EAAQ,MAAQ,MAAMN,EAAsB,mBAAmBE,EAAU,KAAK,CAChF,OAASM,EAAK,CACZH,EAAM,MAAQG,aAAe,MAAQA,EAAI,QAAU,8BACrD,QAAA,CACEJ,EAAU,MAAQ,EACpB,EACF,EAEMK,EAAkBC,IACP,CACb,WAAY,aACZ,WAAY,YACZ,QAAS,YACT,MAAO,QACP,SAAU,WACV,UAAW,WACX,QAAS,UAAA,GAEGA,CAAM,GAAKA,EAGrBC,EAA4BD,IACjB,CACb,QAAS,YACT,oBAAqB,oBACrB,yBAA0B,wBAC1B,MAAO,QACP,QAAS,YACT,UAAW,YAAA,GAECA,CAAM,GAAKA,EAGrBE,EAAyBF,IACb,CACd,WAAY,aACZ,WAAY,gBACZ,QAAS,cACT,MAAO,cACP,SAAU,gBACV,UAAW,gBACX,QAAS,eAAA,GAEIA,CAAM,GAAK,aAGtBG,EAAyBC,IACb,CACd,KAAM,oCACN,QAAS,wCACT,MAAO,iCAAA,GAEMA,CAAI,GAAK,oCAGpBC,EAAcC,GACR,IAAI,KAAKA,CAAI,EACd,mBAAmB,QAAS,CACnC,KAAM,UACN,MAAO,OACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,EAGH,OAAAC,EAAU,IAAM,CACdV,EAAA,CACF,CAAC,6CA9OCW,EAgJYC,EAAA,KAAA,WA/IV,IA8IM,CA9INC,EA8IM,MA9INC,EA8IM,CA7IJD,EA4IM,MA5INE,EA4IM,CA1IJF,EAKM,MALNG,EAKM,CAJJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAA0E,KAAA,CAAtE,MAAM,uCAAA,EAAwC,sBAAmB,EAAA,GACrEA,EAEI,IAFJK,EAEI,eAF6B,0BACT,EAAA,GAAAL,EAA4D,OAA5DM,EAA4DC,EAAnBzB,EAAA,KAAS,EAAA,CAAA,CAAA,KAKjEE,EAAA,OAAXwB,IAAAC,EAMM,MANNC,EAMM,CAAA,GAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CALJJ,EAGM,MAAA,CAHD,MAAM,+CAA+C,MAAM,6BAA6B,KAAK,OAAO,QAAQ,WAAA,GAC/GA,EAAkG,SAAA,CAA1F,MAAM,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,eAAa,GAAA,GACrFA,EAAwK,OAAA,CAAlK,MAAM,aAAa,KAAK,eAAe,EAAE,iHAAA,QAEjDA,EAAyE,IAAA,CAAtE,MAAM,oBAAA,EAAqB,0CAAuC,EAAA,CAAA,MAIvDf,EAAA,OAAhBuB,EAAA,EAAAC,EAgBM,MAhBNE,EAgBM,CAfJX,EAcM,MAdNY,EAcM,aAbJZ,EAEM,MAAA,CAFD,MAAM,iCAAiC,KAAK,OAAO,OAAO,eAAe,QAAQ,WAAA,GACpFA,EAAsN,OAAA,CAAhN,iBAAe,QAAQ,kBAAgB,QAAQ,eAAa,IAAI,EAAE,2IAAA,SAE1EI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAoF,KAAA,CAAhF,MAAM,wCAAA,EAAyC,+BAA4B,EAAA,GAC/EA,EAA6C,IAA7Ca,EAA6CN,EAAZtB,EAAA,KAAK,EAAA,CAAA,EACtCe,EAOM,MAAA,CAPD,MAAM,QAAM,CACfA,EAKS,SAAA,CAJN,QAAOb,EACR,MAAM,iBAAA,EACP,cAED,CAAA,QAMUD,EAAA,OAAhBsB,IAAAC,EAqGM,MArGNK,EAqGM,CAnGJd,EA0BM,MA1BNe,EA0BM,CAzBJf,EAKM,MALNgB,EAKM,CAJJZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAkE,KAAA,CAA9D,MAAM,qCAAA,EAAsC,gBAAa,EAAA,GAC7DA,EAEO,OAAA,CAFA,SAAOR,EAAsBN,QAAQ,MAAM,EAAS,eAAe,CAAA,CAAA,IACrEG,EAAeH,EAAA,MAAQ,MAAM,CAAA,EAAA,CAAA,CAAA,GAIpCc,EAiBM,MAjBNiB,EAiBM,CAhBJjB,EAGM,MAAA,KAAA,CAFJI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAwD,IAAA,CAArD,MAAM,uBAAA,EAAwB,sBAAmB,EAAA,GACpDA,EAA+D,IAA/DkB,EAA+DX,EAArClB,EAAeH,EAAA,MAAQ,MAAM,CAAA,EAAA,CAAA,CAAA,GAEzDc,EAGM,MAAA,KAAA,CAFJI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAyD,IAAA,CAAtD,MAAM,uBAAA,EAAwB,uBAAoB,EAAA,GACrDA,EAAmF,IAAnFmB,EAAmFZ,EAAzDhB,EAAyBL,EAAA,MAAQ,gBAAgB,CAAA,EAAA,CAAA,CAAA,GAE7Ec,EAGM,MAAA,KAAA,CAFJI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAsD,IAAA,CAAnD,MAAM,uBAAA,EAAwB,oBAAiB,EAAA,GAClDA,EAA8D,IAA9DoB,EAA8Db,EAApCZ,EAAWT,EAAA,MAAQ,SAAS,CAAA,EAAA,CAAA,CAAA,GAExDc,EAGM,MAAA,KAAA,CAFJI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAyD,IAAA,CAAtD,MAAM,uBAAA,EAAwB,uBAAoB,EAAA,GACrDA,EAA8D,IAA9DqB,EAA8Dd,EAApCZ,EAAWT,EAAA,MAAQ,SAAS,CAAA,EAAA,CAAA,CAAA,OAMjDA,EAAA,MAAQ,cAAgBA,QAAQ,aAAa,OAAM,GAA9DsB,EAAA,EAAAC,EA2CM,MA3CNa,EA2CM,CA1CJlB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAJ,EAAuE,KAAA,CAAnE,MAAM,0CAAA,EAA2C,gBAAa,EAAA,GAClEA,EAwCM,MAxCNuB,GAwCM,EAvCJf,EAAA,EAAA,EAAAC,EAsCMe,SArC2BtC,EAAA,MAAQ,aAAY,CAA3CuC,EAAaC,SADvBjB,EAsCM,MAAA,CApCH,IAAKiB,EACN,SAAM,4CACEjC,EAAsBgC,EAAY,IAAI,CAAA,CAAA,CAAA,GAE9CzB,EAyBM,MAzBN2B,GAyBM,CAvBIF,EAAY,OAAI,QADxBjB,EAAA,EAAAC,EAOM,MAPNmB,GAOM,CAAA,GAAAxB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CADJJ,EAAqL,OAAA,CAA/K,YAAU,UAAU,EAAE,mIAAmI,YAAU,SAAA,gBAG9JyB,EAAY,OAAI,WAD7BjB,IAAAC,EAOM,MAPNoB,GAOM,CAAA,GAAAzB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CADJJ,EAAsQ,OAAA,CAAhQ,YAAU,UAAU,EAAE,oNAAoN,YAAU,SAAA,iBAE5PQ,IAAAC,EAOM,MAPNqB,GAOM,CAAA,GAAA1B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CADJJ,EAA4Q,OAAA,CAAtQ,YAAU,UAAU,EAAE,0NAA0N,YAAU,SAAA,kBAGpQA,EAKM,MALN+B,GAKM,CAJJ/B,EAA4D,IAA5DgC,GAA4DzB,EAA1BkB,EAAY,OAAO,EAAA,CAAA,EACrDzB,EAEI,IAFJiC,GAEI1B,EADCZ,EAAW8B,EAAY,SAAS,CAAA,EAAA,CAAA,CAAA,6BAQ7CzB,EAuBM,MAvBNkC,GAuBM,CAtBJ9B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAJ,EAAkE,KAAA,CAA9D,MAAM,0CAAA,EAA2C,WAAQ,EAAA,GAC7DA,EAoBM,MApBNmC,GAoBM,CAnBJnC,EAMS,SAAA,CALN,QAAOb,EACP,SAAUH,EAAA,MACX,MAAM,mBAAA,EACP,sBAED,EAAAoD,EAAA,EACAC,EAKaC,EAAA,CAJX,GAAG,WACH,MAAM,6BAAA,aACP,IAED,CAAA,GAAAlC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAFC,oBAED,EAAA,CAAA,WACAiC,EAKaC,EAAA,CAJX,GAAG,UACH,MAAM,+BAAA,aACP,IAED,CAAA,GAAAlC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,GAFC,mBAED,EAAA,CAAA"}